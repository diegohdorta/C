 

 

 

 

 

 

 

 

 

 

 

 

 

**WaRP7: The IoT and Wearable Development Platform**

 

*Hardware User Manual*

**

 

**

 

**v0.4 +
 +
May 24, 2016**

 +

 

**Table of Contents**

 

Table of Contents

link:#_Toc451847637[1.????? Introduction. 4]

link:#_Toc451847638[1.1????????? Platform Purpose. 4]

link:#_Toc451847639[1.2????????? Kit Contents. 4]

link:#_Toc451847640[1.2.1????? Connecting up your WaRP7. 5]

link:#_Toc451847641[2?????? WaRP7 Hardware Overview.. 8]

link:#_Toc451847642[2.1????????? Features/Specifications. 8]

link:#_Toc451847643[2.2????????? Board Dimension and Operating
Environment 10]

link:#_Toc451847644[3?????? Hardware Overview.. 11]

link:#_Toc451847645[3.1????????? CPU Board. 11]

link:#_Toc451847646[3.1.1????? CPU.. 11]

link:#_Toc451847647[3.1.2????? Memory eMCP ? LPDDR3 and eMMC.. 12]

link:#_Toc451847648[3.1.3????? Video and Display. 12]

link:#_Toc451847649[3.1.4????? Connectivity. 15]

link:#_Toc451847650[3.1.5????? Power Management 17]

link:#_Toc451847651[3.2????????? IO Board. 19]

link:#_Toc451847652[3.2.1????? Audio. 19]

link:#_Toc451847653[3.2.2????? Sensors. 19]

link:#_Toc451847654[3.2.3????? Peripheral Expansion Port 21]

link:#_Toc451847655[4?????? Linux Software. 22]

link:#_Toc451847656[4.1????????? Compilation. 22]

link:#_Toc451847657[4.2????????? Testing. 23]

link:#_Toc451847658[4.2.1????? Testing Audio: 23]

link:#_Toc451847659[4.2.2????? Testing Sensors: 24]

link:#_Toc451847660[4.2.3????? Testing Wifi: 27]

link:#_Toc451847661[4.2.4????? Testing LCD: 28]

 

 

*LIST of FIGURES*

link:../../CStiegman/Documents/WORK/Freescale/WaRP7/document/User%20Manual%20-%20WaRP7_HW_&_Linux_v0.1_05102016.docx#_Toc450659580[Figure
1 WaRP7. 4]

link:#_Toc450659581[Figure 2 WaRP7 connected. 5]

link:#_Toc450659582[Figure 3 CPU Board. 7]

link:#_Toc450659583[Figure 4 IO Board. 7]

link:#_Toc450659584[Figure 5 i,MX7S SoC Diagram... 9]

link:#_Toc450659585[Figure 6 KingSton eMCP Block Diagram... 9]

link:#_Toc450659586[Figure 7 MIPI-DSI connector 10]

link:#_Toc450659587[Figure 8 Touch Screen Interface. 11]

link:#_Toc450659588[Figure 9 MIPI CSI connector 11]

link:#_Toc450659589[Figure 10 Murata 1DX module. 12]

link:#_Toc450659590[Figure 11 Design implementation of 1DX.. 12]

link:#_Toc450659591[Figure 12 NFC circuitry. 13]

link:#_Toc450659592[Figure 13 PF3000 Functional Block diagram... 14]

link:#_Toc450659593[Figure 14 Freescale SGTL5000 Audio Codec. 16]

link:#_Toc450659594[Figure 15 MPL3115A2 Block Diagram... 16]

link:#_Toc450659595[Figure 16 Altimeter schematics. 17]

link:#_Toc450659596[Figure 17 FXOS8700CQ ? Accelerometer/Magnetometer
Block Diagram... 17]

link:#_Toc450659597[Figure 18 Accelerometer/Magnetometer schematics. 17]

link:#_Toc450659598[Figure 19 FXAS21002 Gyroscope Block Diagram... 18]

link:#_Toc450659599[Figure 20 Gyroscope schematics. 18]

 

[[introduction]]
link:[1.    Introduction]
-------------------------

[[platform-purpose]]
link:[1.1      Platform Purpose]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

The WaRP7 is the next generation Internet of Things (IoT) and Wearable?s
Reference Platform. WaRP7 is a powerful, low-cost platform designed for
rapid prototyping and reduces time to market. WaRP7 is optimized, comes
is a tiny form factor and yet flexible enough to offer all the
advantages of traditional development tools. It has been architected and
designed from the ground up to address key challenges in the IoT and
wearables markets, such as battery life, connectivity, user experience
and miniaturization. WaRP7 is based on the NXP i.MX 7Solo applications
processor that features an advanced implementation of the ARM?
Cortex?-A7 core, as well as the ARM? Cortex?-M4 core. It comes with
features such as on-board sensors, connectivity including NFC,
Bluetooth?, Bluetooth Smart and Wi-Fi? and on-board external LPDDR3
memory.

 

This document is intended as an introduction to the WaRP7 CPU Board and
IO Board hardware and focuses primarily on its initial setup and basic
usage.

[[kit-contents]]
link:[1.2      Kit Contents]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

 

In the box you will find the following items as shown in **Figure 1**.

 

?? ?WaRP7 CPU Board

?? ?WaRP7 IO Board

?? ?Lithium Polymer Battery

?? ?Quick Start Guide.

 

The display for the kit can be purchased separately (__details coming
soon__).? Check for availability at
http://www.element14.com/warp7[www.element14.com/warp7]

 

 

 

 

 

[width="100%",cols="100%",]
|==============================
a|
?????????? link:[Figure]1 WaRP7

|==============================

 

 

 

[[getting-started-with-hardwareconnecting-up-your-warp7]]
link:[1.2.1           Getting Started with
Hardware][line-through]*Connecting up your WaRP7* +
 +
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

?     STEP 1:? Connect NFC cables to IO board

 

 

 

?     STEP 2:? Connect CPU board

 

 

link:[]link:#_msocom_1[[KM1]] 

?     STEP 3:? Connect link:[battery]link:#_msocom_2[[KM2]] 

 

 

 

?     STEP 4:? link:[]link:[Connect ]LCDlink:#_msocom_3[[KM3]] 

 

 

 

 

 

 

 

link:[Connect] USB

link:#_msocom_4[[KM4]] 

 

[line-through]*Connect* [line-through]*USB*

 

 

 +
link:[Figure]2 WaRP7 connected

* +
*

 

[[warp7-hardware-overview]]
link:[2         W]aRP7 Hardware Overview
----------------------------------------

 

 

The WaRP7 is the next generation Wearable?s Reference Platform based on
the [line-through]*F*[line-through]*reescale *NXP iMX7 Solo applications
processor. [line-through]*I*t is designed to address a multitude of
applications across the rapidly growing IoT market.

 

The kit consists of 2 boards

 

?         A **CPU board** featuring the ARM Cortex-A7 based iMX7
processor, memory, power management and a combo WiFi/BLE module.

?         An **IO board** which provides interface to variety of
sensors, expansion and debugging capabilities.

[[featuresspecifications]]
link:[2.1      Features/Specifications]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

**Features**

**?CPU Board**

 

**Processor**

NXP[line-through]*F*[line-through]*r*[line-through]*ee*[line-through]*s*[line-through]*c*[line-through]*a*[line-through]*l*[line-through]*e*
iMX7S

ARM Cortex-A7/Cortex-M4

**Memory**

8GB, 8bit Embedded MMC/ 512MB LPDDR3

**PMIC**

PF3000 PMIC and BC3770 battery charger.

**Wireless**

Combo WiFI/BLE

 

**Display/Camera interface**

MIPI-DSI connector

MIPI-CSI connector

 

**Power Source**

 

USB/Battery

**PCB**

38mm x 23mm

10 layers

**Indicators**

1-Power, 1 [line-through]*-*? User

**?IO Board**

**Debug Support**

JTAG, Serial Header

 

**Sensors**

 +
Accelerometer, Magnetometer Pressure Sensor Gyroscope

**Audio**

Stereo codec ? Mic In / Line Out

*Expansion*

MikroE Click header

 +

 

 

link:[Figure]3 CPU link:[Board]link:#_msocom_5[[KM5]] 

 

 

link:[Figure]4 IO Board

 

 

 

 

[[board-dimension-and-operating-environment]]
link:[2.2      Board Dimension and Operating Environment]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

link:[]link:[*T*]*able 1 WaRP7 CPU Board Dimensions*

 

Length

38 mm

Width

23 mm

PCB Thickness

1.0 mm

 

 

 

 

The board operates in the commercial temperature range, 0?C ~ 85?C

 

 

 

 

 

 

 

**Table 2 ?WaRP7 IO Board Dimensions**

 

[width="100%",cols="50%,50%",]
|============
a|
Length

 a|
38 mm

a|
Width

 a|
38 mm

a|
PCB Thickness

 a|
1.0 mm

|============

 

 

 

[[hardware-overview]]
link:[3         Hardware Overview]
----------------------------------

[[cpu-board]]
link:[3.1      CP]U Board
~~~~~~~~~~~~~~~~~~~~~~~~~

[[cpu]]
link:[3.1.1     CPU]
^^^^^^^^^^^^^^^^^^^^

 

Main Processor: [line-through]*F*[line-through]*reescale *NXP
MCIMX7S3DVK08SA - i.MX7S with 12mm x 12mm MAPBGA, 0.4mm

 

The i.MX7S applications processor houses an ARM Cortex-A7 core and an
ARM Cortex-M4. The device is targeted for IoT, Wearable and
[line-through]*e*[line-through]*-reader, low-power handheld
Point-of-Sale and *general embedded markets.

 +

 

 +

link:[Figure]5 iMX7S SoC Diagram

**

 

[[memory-emcp-lpddr3-and-emmc]]
link:[3.1.2        Memory eMCP ? LPDDR3 and eMMC]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

The CPU Board features a Multi-Chip Package Memory
08EMCP04-EL3AV100-C30U from Kingston which combines 8GB eMMC and 512MB
Low Power DDR3 synchronous dynamic RAM. This comes in 221-ball FBGA
package.

 

link:[Figure]6 KingSton eMCP Block Diagram

* +
*

 

[[video-and-display]]
link:[3.1.3     Video and Display]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 +

 +

 

The WaRP7 CPU board provides output video from MIPI-DSI and accepts
input through MIPI- CSI

 

 

 

[[mipi-dsi]]
3.1.3.1       MIPI-DSI
++++++++++++++++++++++

 

The CPU board includes a MIPI-DSI connector for outputting output the
video from the i.MX7S MIPI- DSI PHY via the MIPI-DSI interface.

 

link:[Figure]7 MIPI-DSI connector

 +

 

[[capacitive-touch-screen]]
3.1.3.2       Capacitive Touch Screen
+++++++++++++++++++++++++++++++++++++

 

Capacitive touch screen is [line-through]**
[line-through]*m*[line-through]*u*[line-through]*st beis* supported by
I2C via touch screen port.

 

link:[Figure]8 Touch Screen Interface

[[mipi-csi]]
3.1.3.3       MIPI-CSI
++++++++++++++++++++++

 

The CPU board includes a MIPI-CSI camera connector for connecting a CSI
camera module.

 

link:[Figure]9 MIPI CSI connector

 +

 

[[connectivity]]
link:[3.1.4     C]onnectivity
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

The WaRP7 board will provide a number of connectivity include Wi-Fi,
Bluetooth, Bluetooth (BLE), and USB-OTG. There will be provision for NFC
as a passive tag primarily for Bluetooth pairing.

 

[[wi-fibluetooth]]
3.1.4.1       Wi-Fi/Bluetooth
+++++++++++++++++++++++++++++

 

The Murata Type 1DX module is an ultra-small module that includes 2.4GHz
WLAN IEEE

802.11b/g/n and Bluetooth Version 4.1 plus EDR functionality. Based on
Broadcom BCM4343W, the module provide high-efficiency RF front end
circuits.

 

 

link:[ +
Figure]10 Murata 1DX module

link:[ ]link:#_msocom_6[[KM6]] 

link:[Figure]11 Design implementation of 1DX

 

[[usb-otg]]
3.1.4.2       USB-OTG
+++++++++++++++++++++

 

The CPU board provides a USB micro-AB connector to support USB-OTG
function powered by the by USB OTG1 module on i.MX7S.

 

[[nfc]]
3.1.4.3       NFC
+++++++++++++++++

 

The board provides support for NFC using the NXP NT3H1101W0FHK. ?In
addition to the passive NFC Forum compliant contactless interface, the
IC features an I2C contact interface, which can communicate with i.mx7
[line-through]*a microcontroller ?*if
[line-through]*t*[line-through]*h*[line-through]*e *NTAG I2C is powered
from an external power supply. An additional externally powered SRAM
mapped into the memory allows a fast data transfer between the RF and
I2C interfaces and vice versa, without the write cycle limitations of
the EEPROM memory.

link:[Figure]12 NFC circuitry

 +

 

[[power-management]]
link:[3.1.5        P]ower Management
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

[[power-management-ic]]
3.1.5.1       Power Management IC
+++++++++++++++++++++++++++++++++

 

The NXP[line-through]*F*[line-through]*reescale* PF3000 power management
integrated circuit (PMIC) features a configurable architecture that
supports numerous outputs with various current ratings as well as
programmable voltage and sequencing. This enables the PF3000 to power
the core processor, external memory and peripherals to provide a
single-chip system power solution.

 

link:[Figure]13 PF3000 Functional Block diagram

[[power-tree-design]]
3.1.5.2       Power Tree Design
+++++++++++++++++++++++++++++++

 

The usage of PF3000 output is as shown in Table 6 below.

 

 

**Table 2 PF3000 Output Power Up Sequence and Usage**

 

[width="100%",cols="20%,20%,20%,20%,20%",]
|===============================================
a|
**PF0300**

**Channel**

 a|
**Voltage**

 a|
**Power up sequence**

 a|
**Output**

**Current**

 a|
**i.MX7 Power Rail**

a|
SW1A

 a|
1.15 V

 a|
1

 a|
1000 mA

 a|
VDD_ARM

a|
SW1B

 a|
1.15 V

 a|
1

 a|
1750 mA

 a|
VDD_SOC

a|
SW2

 a|
1.8 V

 a|
2

 a|
1250 mA

 a|
VDDA_1P8_IN FUSE_FSOURCE VDD_XTAL_1P8

VDD_ADC1_1P8

VDD_ADC2_1P8

VDD_TEMPSENOR_1P8

a|
SW3

 a|
1.5 V

 a|
3

 a|
1500 mA

 a|
NVCC_DRAM NVCC_DRAM_CKE

a|
VSNVS

 a|
3.0 V

 a|
0

 a|
1 mA

 a|
VDD_SNVS_IN

a|
SWBST

 a|

 

 a|
-

 a|
600 mA

 a|

 

a|
VREFDDR

 a|

 

 a|
3

 a|
10 mA

 a|
DRAM_VREF

a|
VLDO1

 a|
1.8 V

 a|
2

 a|
100 mA

 a|
VDD_LPSR_IN

a|
VLDO2

 a|
1.2 V

 a|
-

 a|
250 mA

 a|

 

a|
VLDO3

 a|
1.8 V

 a|
2

 a|
100 mA

 a|
NVCC_GPIO1/2

a|
VLDO4

 a|
1.8 V

 a|
-

 a|
350 mA

 a|

 

a|
V33

 a|
3.15 V

 a|
2

 a|
350 mA

 a|
NVCC_xxx VDD_USB_OTG1_3P3_IN VDD_USB_OTG2_3P3_IN

a|
VCC_SD

 a|
3.15 V

 a|
3

 a|
100 mA

 a|
NVCC_SD2

|===============================================

 

 

The following i.MX7S power rails must use the internal LDO outputs.

 

**Table 3 iMX7S Power Rails ? Internal LDO**

 

[width="100%",cols="50%,50%",]
|===============================
a|
**i.MX7S internal LDO output**

 a|
**i.MX7S Power Rail**

a|
VDDD_1P0_CAP

 a|
VDD_MIPI_1P0

PCIE_VP PCIE_VP_RX PCIE_VP_TX

a|
VDDA_PHY_1P8

 a|
VDDA_MIPI_1P8

PCIE_VPH PCIE_VPH_RX PCIE_VPH_TX

a|
VDD_1P2_CAP

 a|
USB_VDD_H_1P2

|===============================

 

 

[[battery-charger]]
3.1.5.3       Battery Charger
+++++++++++++++++++++++++++++

 

 

The NXP[line-through]*F*[line-through]*reescale* BC3770 is a fully
programmable switching charger with dual-path output for single-cell
Li-Ion and Li-Polymer battery. The dual-path output allows mobile
applications with a fully discharged battery to boot up the system. +
 +

?           High efficiency and switch-mode operation reduces heat
dissipation and allows for higher current capability for a given package
size

?           Single input with a 20V withstanding input and charges the
battery with an input current up to 2A

?           Charging parameters and operating modes are fully
programmable over an I2C Interface that operates up to 400 kHz

?           Highly integrated featuring OVP and Power FETs

?           Supports 1.5 MHz switching capabilities

 +

 

[[io-board]]
link:[3.2      IO Board]
~~~~~~~~~~~~~~~~~~~~~~~~

 

[[audio]]
link:[3.2.1           A]udio
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

The IO board includes the Freescale SGTL5000 ? a ultra-low power audio
codec with MIC In and Line Out capability.

 

link:[ ]link:#_msocom_7[[KM7]] 

link:[Figure]14 Freescale SGTL5000 Audio Codec

[[sensors]]
link:[3.2.2           Sensors]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

The WaRP7 board will include three sensors: altimeter, accelerometer and
gyroscope. These three sensor chips share the I2C bus on i.MX7S. The
sensors interrupts are wired to the processor as [line-through]*a* OR
circuit. The software will determine which device asserted the
interrupt.

 

[[altimeter]]
3.2.2.1       Altimeter
+++++++++++++++++++++++

 

The board features
[line-through]*F*[line-through]*r*[line-through]*e*[line-through]*e*[line-through]*s*[line-through]*cale?s
*NXP?s MPL3115A2 precision altimeter. The MPL3115A2 is a compact
piezoresistive absolute pressure sensor with an I2C interface. MPL3115
has a wide operating range of 20kPa to 110 kPa, a range that covers all
surface elevations on Earth. The fully internally compensated MEMS in
conjunction with an embedded high resolution 24-bit equivalent ADC
provide accurate pressure [Pascals]/altitude [meters] and temperature
[degrees Celsius] data.

link:[Figure]15 MPL3115A2 Block Diagram

 

link:[Figure]16 Altimeter schematics

[[accelerometer-and-magnetometer]]
3.2.2.2       Accelerometer and Magnetometer
++++++++++++++++++++++++++++++++++++++++++++

 

The board also features FXOS8700CQ 6-axis sensor combines
industry-[line-through]*l*[line-through]*e*[line-through]*a*[line-through]*d*[line-through]*in*[line-through]*g
?14*leading 14-bit accelerometer and 16-bit magnetometer sensors in a
small 3 x 3 x 1.2 mm QFN plastic package.

 

 

link:[Figure]17 FXOS8700CQ ? Accelerometer/Magnetometer Block Diagram

 

link:[ ]link:#_msocom_8[[KM8]] 

link:[Figure]18 Accelerometer/Magnetometer schematics

 

[[gyroscope]]
3.2.2.3       Gyroscope
+++++++++++++++++++++++

 

The IO board also features the
[line-through]*F*[line-through]*reescale?s *NXP?s 3-axis
[line-through]*d*[line-through]*ig*[line-through]*i*[line-through]*t*[line-through]*a*[line-through]*l
?gyroscope*digital gyroscope - ?FXAS21002.

 

link:[Figure]19 FXAS21002 Gyroscope Block Diagram

 

 

link:[ ]link:#_msocom_9[[KM9]] 

link:[Figure]20 Gyroscope schematics

 

[[peripheral-expansion-port]]
link:[3.2.3        Peripheral Expansion Port]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

The board provides expansion headers compatible with the
*mikroBUS***^TM^** socket connection standard for accessing the
following communication modules on i.MX7S:

 

?           I2C

?           SPI

?           PWM

?           UART

?           GPIO

 

 

[[linux-softwarekm10]]
link:[4         Linux ]link:[Software]link:#_msocom_10[[KM10]] 
---------------------------------------------------------------

**

 

*Note:*

command shown with prefix *$* are to be run on host machine (like ubuntu
etc.)

command shown with prefix *=>* are to be run on uboot prompte

command shown with prefix *~#* are to be run on board after linux up.

 

 

[[compilation]]
link:[]link:[4.1      Compilation]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

===========================

 

*Steps:*

 

\1. Extract the kernel and use the below commands to compile

 

$????????????? make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-
distclean

$????????????? make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-
warp7_defconfig

$????????????? make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- zImage

$????????????? make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- modules

$????????????? make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-
imx7d-warp7-mipi-dsi.dtb

 

 

\2. Extract and compile imx_usb_loader-master

\3. usb imx_usb, to load uboot first time in the board.

 

$????????????? cd imx_usb_loader-master

$????????????? make

$????????????? ./imx_usb u-boot.imx

 

\4. u-boot prompt will come. ( we are using minicom )

\5. Run on uboot

 

=>?????????? ums 0 mmc 0

 

\6. Now you will able to see emmc of as storage device on your computer.

\7. Use any standard utility to make partition table.

\8. create 3 partitions (10MB(Fat32), 100MB(Fat32) and remaining space
as ext4)

\9. copy zImage to to the 100MB fat32 partition.

10.rename and copy *imx7d-warp7-mipi-dsi.dtb* as *warp7.dtb* to the
100MB fat32 partition.

\11. copy the *rootfs_debian.tar.bz2* to the 3rd ext4 partition.

\12. now install kernel modules ?to the rootfs as shown below.

$ **sudo make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-
modules_install
INSTALL_MOD_PATH=/path_to_your_emmc_ext4_partition_mount**

 

\13. now unmount the partitions using "**sudo umount /dev/sdX**"
command.

\14. in u-boot prompt, hit **Ctrl+c**, to cancel the mounted mmc.

\15. in u-boot prompt, ?use *loadx* command to load *uboot* to ram.

????? after loadx completed , press **ctrl+a**, then s to select xmodem
for uboot transfer.

=> loadx

. save the uboot in emmc.

=> mmc write 0x80800000 2 0x2a6

 

*<CAUTION>*

\16. now fuse the OTP. This command is one time only, be careful else it
will brick the board .

 

=> fuse prog 1 3 10002820

 

\17. set bootcmd environment params ?as below .

 

=> *setenv bootcmd 'setenv mmcroot /dev/mmcblk2p3 rootwait rw;setenv
bootargs console=$\{console},$\{baudrate} root=$\{mmcroot};mw 30330218
0;fatload mmc 0:2 0x80800000 zImage;fatload mmc 0:2 0x83000000
warp7.dtb;bootz 0x80800000 - 0x83000000'*

 

=> *saveenv*

 

=> *run bootcmd*

 

Now linux must be up and running.

 

\18. using NET OVER USB, we build USB ethernet build as **module**.

????? use below commands on the board to load the modules.

????? Note: using static IP in your host system. We are using as below
in */etc/network/interfaces*

*192.168.7.10, *

*255.255.255.0, *

*192.168.7.1*

 

~#?????????? insmod
/lib/modules/4.1.15/kernel/drivers/usb/gadget/libcomposite.ko

~#?????????? insmod
/lib/modules/4.1.15/kernel/drivers/usb/gadget/function/u_ether.ko

~#?????????? insmod
/lib/modules/4.1.15/kernel/drivers/usb/gadget/function/usb_f_rndis.ko

~#?????????? insmod
/lib/modules/4.1.15/kernel/drivers/usb/gadget/legacy/g_ether.ko

~#?????????? ifup usb0

 

[[testing]]
link:[]link:[4.2      Testing]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

===========================

**

 

[[testing-audio]]
link:[]link:[4.2.1     Testing Audio:]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

*======================================================*

listen audio from warp7:

place an audio file (ex: input.wav) file in home directory,and run below
command:

**~#** *aplay input.wav*

**

 

record audio usingwarp7:

run below command, it will record audio file with 10 secs duration .

**?~#** *arecord -d 10 output.wav*

**

 

to change volume control of headphone:

below example shows to change volume to 100%

*~# amixer set 'Headphone' 100%*

**

 

to change gain control of mic:

below example shows to change gain control to 100%

*~# amixer set 'Mic' 100%*

**

 

*Testing Battery Charger:*

*======================================================*

compile & run the "bc3770.c" from the utils folder.

**

 

link:[ ]link:#_msocom_11[[KM11]] 

**

 

**

 

**

 

**

 

[[testing-sensors]]
link:[]link:[4.2.2     Testing Sensors:]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

*======================================================*

The mpl3115a2 sensor consists of Pressure and Altimeter.

 

The FXOS8700CQR1 sensor consists of Acclerometer and Magnetometer.

 

The FXAS21002CQR1 sensor consists of Gyrometer:

 

run "i2cdetect" command to scan i2c bus for devices.

**UU** shows devices already binded to platform/drivers.

 

 

 

To detect sensor identity status we will check for ?"**WHOAMI**"
?register values:

execute below commands in terminal:

 

*mpl3115a2:*

**~#** i2cget -y 3 0x60 0x0C

*0xc4*

 

MPL3115A2 datasheet confirms? the "WHOAMI" value.

 

 

*FXOS8700CQR1*

**~#**i2cget -y 3 0x1e 0x0D

*0xc7*

FXOS8700CQR1 datasheet confirms? the "WHOAMI" value.

 

 

**

 

*FXAS21002CQR1*

$i2cget -y 3 0x20 0x0C

*0xd7*

FXAS21002CQR1 datasheet confirms? the "WHOAMI" value.

 

 

 

With above detection we can confirm the sensor hardware is working.

sample codes "detect_acclerometer.c","detect_gyrometer.c" and
"detect_mpl3115.c" confirm the same.

 

 

 

 

we developed a simple bare-metal application in Linux to access mpl3115
sensor.

the same can be done for android/yocto platforms .

 

the code "**mpl3115_temperature.c**" can be compiled and tested to get
temperature values.

 

you will get result as below (with debug enabled):

 

 

 

 

?(note: the code access **/dev/i2c-3 **interface, if **MPL3115A2**
driver enabled in kernel, the code will fail due to device blocking by
driver)

 

 

With testing part over, we can proceed to further development using
kernel supported drivers.

enable the supported drivers in kernel by setting the below values to
"**y**" in *.config* or "**make menuconfig**":

 

*# CONFIG_SENSORS_FXOS8700 is not set*

*# CONFIG_SENSORS_FXAS2100X is not set*

*# CONFIG_INPUT_MPL3115 is not set*

 

to

 

*CONFIG_SENSORS_FXOS8700=y*

*CONFIG_SENSORS_FXAS2100X=y*

*CONFIG_INPUT_MPL3115=y*

 

applications need to be written from android/debian/yocto interfaces to
access full functionality.

 

**

 

[[testing-wifi]]
link:[]link:[4.2.3     Testing Wifi:]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

*======================================================*

 

broadcom bcmdhd getting loaded and wireless interface getting up suring
kernel boot.

this comes from enabling "**Broadcom FullMAC wireless cards support** "
in kernel source "Device Drivers >> Network Device Support > Wireless
Lan"

 

the firmware supporting "**BCM4339** " hardware is available in
"**/lib/firmware/bcm**" directory.

 

 

 

 

automatic ip allocation using DHCP:

 

 

 

Verify ip address:

 

 

 

Ping test:

 

 

?change setting for *essid* & *password* in "/etc/network/interfaces"
file.

===========================================

auto lo

iface lo inet loopback

 

auto wlan0

iface wlan0 inet dhcp

???????? wpa-ssid "SSID_NAME"

???????? wpa-psk "PASSWORD"

===========================================

 

 

wpa_supplicant? config? *"/etc/wpa_supplicant.conf"*

===========================================

ctrl_interface=/var/run/wpa_supplicant

ctrl_interface_group=0

update_config=1

 

network=\{

?? ssid=" SSID_NAME "

?? scan_ssid=1

?? key_mgmt=WPA-PSK2

?? psk=" PASSWORD "

?? priority=5

}

===========================================

 

[[testing-lcd]]
link:[]link:[4.2.4     Testing LCD:]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

After boot up , goto /root/lcd and run the following command:

./framebuffer.out

 

 

It will starts the following sequence of displays.

 

 

 

 

 

 

 

?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????

'''''

[[_com_1]]
link:[]

 link:#_msoanchor_1[[KM1]]Need Bigger and clearer pictures.

[[_com_2]]
link:[]

 link:#_msoanchor_2[[KM2]]

[[_com_3]]
link:[]

 link:#_msoanchor_3[[KM3]]Need more details on how to connect the LCD as
the process is delicate and complicated.

[[_com_4]]
link:[]

 link:#_msoanchor_4[[KM4]]Which USB port connects to what? I recommend
to label each port, including USB, Battery connector, LCD connector and
other in a diagram at the top of the use manual and refer those port
numbers/names in each step.

[[_com_5]]
link:[]

 link:#_msoanchor_5[[KM5]]Please use the diagram labelled with NXP

[[_com_6]]
link:[]

 link:#_msoanchor_6[[KM6]]Make the schematics bigger

[[_com_7]]
link:[]

 link:#_msoanchor_7[[KM7]]Make Schematic Bigger

[[_com_8]]
link:[]

 link:#_msoanchor_8[[KM8]]Make Schematic Bigger

[[_com_9]]
link:[]

 link:#_msoanchor_9[[KM9]]Make Schematic Bigger

[[_com_10]]
link:[]

 link:#_msoanchor_10[[KM10]]Add following,

1)       the information on how to download Linux and from which
website.

2)       Computer System Requirement (Hardware and Software)

3)       Step by step guide to open terminal and linux Image +
4) Software File Structure

4)       Software Overview

[[_com_11]]
link:[]

 link:#_msoanchor_11[[KM11]]Make Image bigger

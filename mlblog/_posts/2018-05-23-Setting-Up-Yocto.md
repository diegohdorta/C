---
layout: post
---

The recommended and most appropriate way to guarantee determinis on development is to use Yocto. If you never set up on your machine the `prerequisites` for configuring and running Yocto, follow the next steps:

## **Software Requirements**

- Host OS: Tested on Ubuntu 18.04 LTS.
- Host packages:

You will need `root provigilies` to install the following essential packages:

```markdown
$ apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib build-essential chrpath socat libsdl1.2-dev
```
You will also need to install a few more packages required for `i.MX layers`:

```markdown
$ apt-get install libsdl1.2-dev xterm sed cvs subversion coreutils texi2html docbook-utils python-pysqlite2 help2man gcc g++ make desktop-file-utils libgl1-mesa-dev libglu1-mesa-dev mercurial autoconf automake groff curl lzop asciidoc u-boot-tools
```

## **Repo Utility**

You probably need to install `repo` utility once:

```markdown
$ mkdir ~/bin
$ curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
$ chmod a+x ~/bin/repo
$ PATH=${PATH}:~/bin
```
## Yocto Project Environment

```markdown
$ mkdir fsl-arm-yocto-bsp
$ cd fsl-arm-yocto-bsp
$ repo init -u https://source.codeaurora.org/external/imx/imx-manifest -b <branch> -m <manifest>
$ repo sync
```
Choose a branch:

- [imx-linux-morty](https://source.codeaurora.org/external/imx/imx-manifest/tree/?h=imx-linux-morty)
- [imx-linux-rocko](https://source.codeaurora.org/external/imx/imx-manifest/tree/?h=imx-linux-rocko)

Then, choose a manifest `imx-linux-morty`:

**i.MX8M Scale**:

- imx-4.9.51-8mq_beta.xml
- imx-4.9.51-8mq_ga-optee-demo.xml
- imx-4.9.51-8mq_ga.xml

**i.MX8QM**:

- imx-4.9.51-8qm_beta1-agl-demo.xml
- imx-4.9.51-8qm_beta1.xml
- imx-4.9.51-8qm_beta2.xml

**i.MX8QXP**:

- imx-4.9.51-8qxp_alpha.xml

For `imx-linux-rocko` manifests you can look [here](https://source.codeaurora.org/external/imx/imx-manifest/tree/?h=imx-linux-rocko).

## Examples

For `repo init` command, you can use as an example the following command line for `i.MX8QM`:

```markdown
$ repo init -u https://source.codeaurora.org/external/imx/imx-manifest -b imx-linux-morty -m imx-4.9.51-8qm_beta2.xml
$ repo sync
```

For compiling an image for `i.MX8QM` use the following command line:

```markdown
$ EULA=1 MACHINE=imx8qmmek DISTRO=fsl-imx-xwayland source ./fsl-setup-release.sh -b bld-xwayland
```
Then, inside `bld-xwayland` folder just run the `bitbake` command:

```markdown
$ bitbake core-image-base
```
This command can take several hours, but it can guarantee you will have a full environment to create images and test them. 

## Flashing SD card

The output files generated by Yocto will be found inside `tmp/deply/image/<board_name>/<core_image>.sdcard.bz2`.

1. Uncompressed the image by using `bzunzip2` command:

```markdown
$ bunzip2 -f core-image-base-imx8qmmek-20180525123855.rootfs.sdcard.bz2
```

2. Flash the uncompressed image into your SD card, you may need `root privilegies`:

```markdown
$ dd if=core-image-base-imx8qmmek-20180525123855.rootfs.sdcard of=/dev/sd<x> status=progress && sync
```


